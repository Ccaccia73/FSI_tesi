\documentclass[a4paper,12pt,openright,notitlepage,twoside]{book}
\raggedbottom % lascia alla fine delle pagine lo spazio invece che adattarle


% pacchetti da caricare
\usepackage[T1]{fontenc} % definisce i caratteri di output
\usepackage[utf8]{inputenc} % definisce i caratteri di input
\usepackage[english]{babel} % definisce la lingua del documento
\usepackage[headheight=15pt]{geometry} % definisce i margini del documento
\geometry{a4paper,top=30mm,bottom=30mm,left=30mm,right=25mm,heightrounded,bindingoffset=3mm}
\usepackage{fancyhdr} % serve per gestire intestazione e piè di pagina
\pagestyle{fancy}
\usepackage{emptypage} % serve per fare le pagine vuote
\usepackage[pdftex]{hyperref} % serve per ottenere links e indice cliccabili
\hypersetup{colorlinks=true,allcolors=black}
\usepackage{microtype} % migliora la scrittura del testo
\usepackage{appendix} % serve per personalizzare l'appendice

% \usepackage[printonlyused]{acronym} % serve per creare l'elenco degli acronimi
\usepackage[acronym]{glossaries}

\usepackage{eurosym} % serve per scrivere il singolo dell'euro
\usepackage{siunitx} % serve per mettere le unita` di misura nel SI
\usepackage{mathtools} % serve per fare le formule matematiche (carica anche AMSMATH)
\usepackage{booktabs} % serve per fare le tabelle più belle
\usepackage{multirow} % serve per fare le tabelle con righe complesse
\usepackage{pgfplotstable} % serve per fare tabelle da file con dati tabulati
\usepackage{graphicx} % serve per fare le figure
\usepackage{tikz} % serve per fare i grafici
\usetikzlibrary{shapes,quotes,arrows.meta}
\usepackage{pgfplots} % serve a fare i grafici anche lui
\pgfplotsset{compat=1.14}
\usepackage{subcaption} % serve per aggiungere la didascalia alle figure composte (carica anche CAPTION)
\captionsetup{font=small,labelsep=period,format=hang,tableposition=top,figureposition=bottom}
\usepackage{tocloft} % serve per fare le liste di figure e tabelle più belle
\usepackage{cite} % serve per mettere le citazioni bibliografiche
\usepackage{amsmath,amsfonts,amsthm,bm} % Math packages

\usepackage[ruled,vlined,linesnumbered]{algorithm2e}

%\usepackage{3Dstructuralanalysis}
%\usepackage{structuralanalysis}
\usepackage{stanli}
\usepackage{siunitx}

\usepackage{tablefootnote}


\usepackage[section]{placeins}

\usepackage{soul}
\usepackage{color}
\usepackage{colortbl}

\usepackage{listings}


\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}
\definecolor{gray}{rgb}{0.4,0.4,0.4}
\definecolor{darkblue}{rgb}{0.0,0.0,0.6}
\definecolor{lightblue}{rgb}{0.0,0.0,0.9}
\definecolor{cyan}{rgb}{0.0,0.6,0.6}
\definecolor{darkred}{rgb}{0.6,0.0,0.0}

\definecolor{purple}{HTML}{710193}
\definecolor{green}{HTML}{028A0F}

\lstset{
	basicstyle=\ttfamily,
	columns=fullflexible,
	showstringspaces=false,
	numbers=left,                   % where to put the line-numbers
	numberstyle=\tiny\color{gray},  % the style that is used for the line-numbers
	stepnumber=1,
	numbersep=5pt,                  % how far the line-numbers are from the code
	backgroundcolor=\color{white},      % choose the background color. You must add \usepackage{color}
	showspaces=false,               % show spaces adding particular underscores
	showstringspaces=false,         % underline spaces within strings
	showtabs=false,                 % show tabs within strings adding particular underscores
	frame=none,                   % adds a frame around the code
	rulecolor=\color{black},        % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. commens (green here))
	tabsize=2,                      % sets default tabsize to 2 spaces
	captionpos=b,                   % sets the caption-position to bottom
	breaklines=true,                % sets automatic line breaking
	breakatwhitespace=false,        % sets if automatic breaks should only happen at whitespace
	title=\lstname,                   % show the filename of files included with \lstinputlisting;
	% also try caption instead of title  
	commentstyle=\color{gray}\upshape
}

\lstdefinelanguage{XML}
{
  morestring=[s][\color{darkblue}]{"}{"},
  morestring=[s][\color{black}]{>}{<},
  morecomment=[s]{<?}{?>},
  morecomment=[s][\color{dkgreen}]{<!--}{-->},
  stringstyle=\color{black},
  identifierstyle=\color{green},
  keywordstyle=\color{purple},
  morekeywords={xmlns,version,type, dimensions, from, to, first, second, value, data:vector, use-data, write-data, read-data, use-mesh, limit}% list your attributes here
}

\lstdefinelanguage{mbdyn}
{
  morestring=[s][\color{darkblue}]{"}{"},
  morecomment=[l]{\#},
  morecomment=[s]{/*}{*/},
  morecomment=[n]{(*}{*)},
  stringstyle=\color{black},
  identifierstyle=\color{red},
  keywordstyle=\color{blue},
  morekeywords={begin, end, control data, initial value ,problem}% list your attributes here
}

\colorlet{punct}{red!60!black}
\definecolor{background}{HTML}{EEEEEE}
\definecolor{delim}{RGB}{20,105,176}
\colorlet{numb}{magenta!60!black}

\lstdefinelanguage{json}{
	basicstyle=\normalfont\ttfamily,
	numbers=left,
	numberstyle=\scriptsize,
	stepnumber=1,
	numbersep=8pt,
	showstringspaces=false,
	breaklines=true,
	frame=lines,
%	backgroundcolor=\color{background},
	literate=
	*{0}{{{\color{numb}0}}}{1}
	{1}{{{\color{numb}1}}}{1}
	{2}{{{\color{numb}2}}}{1}
	{3}{{{\color{numb}3}}}{1}
	{4}{{{\color{numb}4}}}{1}
	{5}{{{\color{numb}5}}}{1}
	{6}{{{\color{numb}6}}}{1}
	{7}{{{\color{numb}7}}}{1}
	{8}{{{\color{numb}8}}}{1}
	{9}{{{\color{numb}9}}}{1}
	{:}{{{\color{punct}{:}}}}{1}
	{,}{{{\color{punct}{,}}}}{1}
	{\{}{{{\color{delim}{\{}}}}{1}
	{\}}{{{\color{delim}{\}}}}}{1}
	{[}{{{\color{delim}{[}}}}{1}
	{]}{{{\color{delim}{]}}}}{1},
}



\usepackage{hyperref}
\hypersetup{
	colorlinks=true,
	linkcolor=[rgb]{0 0 0.5},
	filecolor=magenta,      
	urlcolor=blue,
	citecolor=[rgb]{0.0, 0.45,0.0}
}

\urlstyle{same}

% modifiche dei comandi
\renewcommand{\chaptermark}[1]{\markboth{\chaptername\ \thechapter.\ #1}{}} % modifica l'intestazione con il nome/numero del capitolo
\renewcommand{\sectionmark}[1]{\markright{\thesection.\ #1}} % modifica l'intestazione con il nome/numero dela sezione
\renewcommand{\cftfigfont}{Figure } % per aggiungere "Figure " nella lista delle figure
\renewcommand{\cfttabfont}{Table } % per aggiungere "Table " nella lista delle tabelle


\DeclareMathOperator*{\argmin}{argmin} % thin space, limits underneath in displays


% Keywords command
\providecommand{\keywords}[1]
{
  \small	
  \textit{\textbf{Keywords---}} #1
}

\providecommand{\parolechiave}[1]
{
	\small	
	\textit{\textbf{Parole chiave---}} #1
}


% dichiarazioni personalizzate
\DeclarePairedDelimiter{\abs}{\lvert}{\rvert} % per fare il valore assoluto
\DeclarePairedDelimiter{\norma}{\lVert}{\rVert} % per fare la norma


\newacronym{fsi}{FSI}{Fluid-Structure Interaction}
\newacronym{mbdyn}{MBDyn}{MultiBody Dynamics analysis software}
\newacronym{precice}{preCICE}{precise Code Interaction Coupling Environment}
\newacronym{ale}{ALE}{arbitrary Lagrangian-Eulerian}
\newacronym{cfd}{CFD}{Computational Fluid Dynamics}
\newacronym{csm}{CSM}{Computational Solid Mechanics}
\newacronym{nse}{NSE}{Navier Stokes Equations}
\newacronym{pde}{PDE}{Partial Differential Equations}
\newacronym{vwp}{VWP}{Virtual Work Principle}
\newacronym{fem}{FEM}{Finite Element Method}
\newacronym{fvm}{FVM}{Finite Volume Method}
\newacronym{ame}{AME}{added mass effect}
\newacronym{fpi}{FPI}{fixed point iteration}
\newacronym{iqnils}{IQN-ILS}{interface quasi Newton with inverse Jacobian from a least squares model}
\newacronym{rbf}{RBF}{Radial Basis Function}
\newacronym{api}{API}{application programming interface}
\newacronym{xml}{XML}{extensible markup language}
\newacronym{mpi}{MPI}{message passing interface}
\newacronym{tcpip}{TCP/IP}{Transmission Control Protocol/Internet Protocol}
\newacronym{dof}{DoF}{degree of freedom}
\newacronym{json}{JSON}{JavaScript Object Notation}
\newacronym{ssi}{SSI}{Solid-Solid Interaction}

\makeglossaries

\begin{document}


\frontmatter % serve per mettere i numeri romani come numeri di pagina 
\thispagestyle{empty} % serve per rimuovere tutte le impostazioni delle pagine dalla prima pagina

% FRONTESPIZIO
\begin{center}
% Intestazione
\Large{\textbf{Politecnico di Milano}} \\
\vspace{-4mm}
\rule{\textwidth}{0.4pt}
\normalsize{SCHOOL OF INDUSTRIAL AND INFORMATION ENGINEERING} \\
\normalsize{Master of Science -- Aerospace Engineering} \\
\vspace{20mm}
% Logo Politecnico
\begin{figure}[h!]
\centering
\includegraphics[height=0.15\textheight]{images/logo-polimi}
\end{figure}
\vspace{22mm}
% Titolo Tesi
\huge{\textbf{Thesis Title}} \\
\vspace{32mm}
\end{center}

% Relatore/Correlatore
\begin{flushleft}
\normalsize{Supervisor} \\
\small{\textbf{Title Name SURMANE}} \\
\vspace{5mm}
\normalsize{Co-Supervisor} \\
\small{\textbf{Title Name SURNAME}} \\
\end{flushleft}
\vspace{20mm}

% Autore
\begin{flushright}
\normalsize{Candidate} \\
\small{\textbf{Claudio Giovanni CACCIA -- 820091}} \\
\end{flushright}
\vspace{15mm}

% Piè Di Pagina
\begin{center}
\rule{\textwidth}{0.4pt}
\small{\textbf{Academic Year 2019 -- 2020}}
\end{center}


% modifica intestazione e piè di pagina del corpo del documento
\fancyhead{} % cancella tutti i campi dell'intestazione
\fancyfoot{} % cancella tutti i campi del piè di pagina
\fancyhead[LE,RO]{\leftmark}
\fancyfoot[LE,RO]{\thepage}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0pt}


% carico le varie parti della tesi
\input{chapters/00_acknowledgements}
\input{chapters/00_abstract}
\input{chapters/00_sommario}
% \input{chapters/extended_abstract}
\cleardoublepage


% modifica intestazione indice
\fancyhead[LE,RO]{\nouppercase{\leftmark}} % cancella il tutto maiuscolo

% Indice 
\phantomsection
\tableofcontents
\addcontentsline{toc}{chapter}{\contentsname}
\cleardoublepage


% Lista delle Figure
\phantomsection
\listoffigures
\addcontentsline{toc}{chapter}{\listfigurename}
\cleardoublepage


% Lista delle Tabelle
\phantomsection
\listoftables
\addcontentsline{toc}{chapter}{\listtablename}
\cleardoublepage

% Lista del codice
\phantomsection
\lstlistoflistings
\addcontentsline{toc}{chapter}{\lstlistingname}
\cleardoublepage


\fancyhead[LE]{\leftmark}
\fancyhead[RO]{\rightmark}
\fancyfoot[LE,RO]{\thepage}

\mainmatter % serve per mettere i numeri arabi come numeri di pagina


% Capitoli Tesi
\input{chapters/01_introduction}
\input{chapters/02_FSI_physics}
\input{chapters/03_FSI_computation}
\input{chapters/04_software}
\input{chapters/05_adapter}
\input{chapters/06_Testcases}

% Conclusioni
\input{chapters/07_conclusions}


% Appendici
\renewcommand{\chaptermark}[1]{\markboth{\appendixname\ \thechapter.\ #1}{}} % modifica l'intestazione con il nome/lettera dell'appendice
\fancyhead[LE,RO]{\leftmark}

\appendix % trasforma i numeri in lettere per fare l'appendice
\input{chapters/A_appendix}
\input{chapters/B_appendix}
\input{chapters/C_appendix}
\input{chapters/D_appendix}

% Acronimi
\cleardoublepage
\input{chapters/acronyms}

% modifica intestazione della bibliografia
\fancyhead[LE,RO]{\nouppercase{\leftmark}} % cancella il tutto maiuscolo


% Bibliografia
\cleardoublepage
%\bibliographystyle{IEEEtran}
\bibliographystyle{acm}
\bibliography{bibliography/thesis}
\addcontentsline{toc}{chapter}{Bibliography}

\end{document}